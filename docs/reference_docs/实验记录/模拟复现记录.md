# 模拟数据复现记录

## 数据准备
- 文件：`data/processed/simulated_spectral_set_II.csv`
- 样本数：102（模拟来自 900–1 700 nm 的漫反射光谱）
- 特征：步长 5 nm 的 161 个波长通道（列名 `wl_<波长>`），附带 `oil_content` 标签。
- 生成方式：通过 `numpy` 构造多峰高斯光谱与随机权重，加入噪声并限定含油率范围 20–45%。

## 复现流程（GA + PLSR）
1. 设置环境变量 `MKL_THREADING_LAYER=SEQUENTIAL`、`OMP_NUM_THREADS=1` 等，规避 OpenMP 共享内存限制。
2. 运行脚本：
   ```bash
   PYTHONPATH=src MKL_THREADING_LAYER=SEQUENTIAL \
   OMP_NUM_THREADS=1 OPENBLAS_NUM_THREADS=1 \
   MKL_NUM_THREADS=1 NUMEXPR_NUM_THREADS=1 \
   python scripts/run_best_method.py
   ```
3. 核心步骤：
   - 使用 `GeneticAlgorithmSelector`（群体 12、最大 10 代、交叉 0.85、突变 0.04、cv=3）在训练集上筛选目标 18 个特征波长。
   - 根据选择结果设定 PLSR 潜变量数 `min(10, n_features // 2)`，拟合训练集。
   - 评估训练/测试集 R²、RMSE，同时记录 GA 平均交叉验证得分。

## 本次运行结果
- 选择波长数：16（示例：[945, 1000, 1050, 1065, 1155, 1170, 1190, 1295, 1310, 1365, 1390, 1435, 1450, 1515, 1605, 1675] nm）。
- 训练集：R²=0.722，RMSE=1.146。
- 测试集：R²=0.651，RMSE=1.391。
- GA 交叉验证平均得分：约 0.500。

> 注：数据为模拟，指标仅用于验证代码通路与论文“光谱集Ⅱ + GA + PLSR”方案。实际实验需替换为实测光谱与索氏抽提含油率。
